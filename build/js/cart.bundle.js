!function(t){var e={};function n(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));class a{static saveProducts(t){localStorage.setItem("products",JSON.stringify(t.items)),sessionStorage.setItem("products",JSON.stringify(t.items))}static getProduct(t){return JSON.parse(localStorage.getItem("products")).find(e=>e.id===t)}static addProduct(t,e){t=[...t,e]}static saveCart(t){localStorage.setItem("cart",JSON.stringify(t))}static getCart(){return localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[]}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));let a="http://localhost:8080",o="/products",i=new URL(window.location.href).origin;a=a==i?"http://localhost:3000":i;class r{async getProducts(){let t=JSON.parse(sessionStorage.getItem("products"));if(t&&t.length>0)return{items:t};let e=await fetch(a+o);return(await e.json()).data}static async submitPay(t){o="/pay/submit";try{let e=await fetch(a+o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return await e.json()}catch(t){console.log(t)}}}},,,,,,,function(t,e,n){"use strict";n.r(e);var a=n(1),o=n(0);n(9),n(10),n(11),n(12);let i=[],r=[],s=[],c=document.querySelector("#products"),d=document.querySelector("#subtotal"),l=document.querySelector("#extra_gastos"),u=document.querySelector("#total"),m=document.querySelector("#products"),p=document.querySelector("#modal"),f=document.querySelector("#lastModal"),y=document.querySelector("#pay"),v=[];document.querySelector("#nav_title").addEventListener("click",()=>{location.href="/"});class g{displayProducts(t){let e='\n    <div class="header" id ="header">\n      <h2>Shopping Cart</h2>\n      <button id="clean_cart" class="clean_button button1">Clean Cart</button>\n      </div>\n    ';t.length;t.forEach(t=>{let{id:n,name:a,description:o,price:i,image:r,amount:s}=t;a=a[0].toUpperCase()+a.slice(1),o=o[0].toUpperCase()+o.slice(1),e+=`\n      <div id=${n} class="item">\n                <div class="item__image">\n\n                        <img class="image" src="${r}"  />\n                </div>\n                <div class="item__content">\n\n                  <div class="item__content_info">\n                        <h4 id="name" class="name">${a}</h4>\n                        <p id="description" class="description">Thanks for<br /> cho-cho-choosing me!</p>\n                  </div>\n                <span class="price" id="price">$${i}</span>\n                  <div class="item__content_actions">\n                  <div>\n                    <button class="item_button button1" id="item_button" data-id=${n} name="decrement" >-1</button>\n                    <span id="item_amount" class="amount" data-id=${n}>${s}</span>\n                    <button class="item_button button1" id="item_button" data-id=${n} name="increment">+1</button>\n                    </div>\n                    <button id="item_button_delete" class="delete_button button1" data-id=${n}>delete</button>\n                  </div>\n                </div>\n      </div>\n      `}),c.innerHTML=e}static displayResumen(t){let e=0,n=0;t.map(t=>{e+=t.price*t.amount,n+=t.amount});let a=e?3:0,o=e+a;d.innerHTML="$ "+parseFloat(e.toFixed(2)),l.innerHTML="$ "+a,u.innerHTML="$ "+parseFloat(o.toFixed(2))}setupApp(){v=o.a.getCart(),this.displayProducts(v),this.getButtons(),g.displayResumen(v)}increment(){let t=this.dataset.id,e=v.find(e=>e.id===t);s.find(e=>e.dataset.id===t).innerHTML=++e.amount,o.a.saveCart(v.map(t=>t.id===e.id?e:t)),g.displayResumen(v)}decrement(t){let e=v.find(t=>t.id===this.dataset.id);s.find(t=>t.dataset.id===this.dataset.id).innerHTML=--e.amount,o.a.saveCart(v.map(t=>t.id===e.id?e:t)),g.displayResumen(v)}delete(t){let{id:e}=this.dataset,n=o.a.getProduct(e);if(confirm("_____confirm delete: "+n.name)){let t=v.filter(t=>t.id!=e);o.a.saveCart(t),m||console.log("products not defined"),m.querySelector("#"+e).remove(),v=t}else console.log("not delete");g.displayResumen(v)}clean(t=!1){t&&location.reload(),localStorage.removeItem("cart")}showModal(){p.classList.add("open")}closeModal(){p.classList.remove("open")}getButtons(){r=[...document.querySelectorAll("#item_button_delete")],i=[...document.querySelectorAll("#item_button")],s=[...document.querySelectorAll("#item_amount")],r.forEach(t=>{t.addEventListener("click",this.delete)}),i.forEach(t=>{"increment"===t.name?t.addEventListener("click",this.increment):t.addEventListener("click",this.decrement)}),document.querySelector("#clean_cart").addEventListener("click",()=>{confirm("_____confirm clean cart")&&this.clean(!0)}),y.addEventListener("click",this.showModal),p.addEventListener("click",t=>{"modal"===t.target.id&&this.closeModal()});let t=document.querySelector("form");t.addEventListener("submit",async e=>{e.preventDefault();let{fname:n,lname:o,city:i,street:r,number:s}=t.elements,c={fname:n.value,lname:o.value,city:i.value,street:r.value,number:s.value,cart:v},d=await a.a.submitPay(c);d.ok&&(this.closeModal(),setTimeout(()=>{f.querySelector("#link").href=d.link;f.classList.add("open"),console.log("1")},1e3))})}}document.addEventListener("DOMContentLoaded",()=>{(new g).setupApp()})},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){}]);